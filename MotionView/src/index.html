<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PROS Path Viewer (Offline)</title>
  <link rel="stylesheet" href="styles.css" />
  <script type="module" src="/main.js" defer></script>
</head>
<body>
<header id="topBar" class="topBar">
  <input id="file" type="file" accept=".json" style="display:none" />
  <input id="robotImageFile" type="file" accept="image/*" style="display:none" />
  <div class="topBarLeft">
    <button id="btnFit" class="iconBtn" title="Maximize field (square)">‚§¢</button>
    <button id="btnSettings" class="iconBtn" title="Settings">‚öôÔ∏è</button>
    <button class="iconBtn pillAction" id="btnClearField" style="font-size: 12px" title="Clear field">‚ùå</button>
    <button id="btnHelp" class="iconBtn" title="Help">?</button>
    <span class="topStatus muted" id="status">Drop a viewer JSON file.</span>
  </div>
  <div class="topBarCenter">
    <div class="modeToggle" role="tablist" aria-label="Mode selector">
      <button id="modeViewing" class="modeBtn isActive" role="tab" aria-selected="true" data-mode="viewing">Viewing</button>
      <button id="modePlanning" class="modeBtn" role="tab" aria-selected="false" data-mode="planning">Planning</button>
    </div>
  </div>
  <div class="topBarRight">
    <button id="btnPlay" class="iconBtn" title="Play/Pause" disabled>‚ñ∂</button>
    <div class="chip">
      <span class="muted">Speed</span>
      <select id="speedSelect" class="settingsSelect toolbarSelect" title="Playback Speed Changer">
        <option value="0.25">0.25x</option>
        <option value="0.5">0.5x</option>
        <option value="1" selected>1x</option>
        <option value="2">2x</option>
        <option value="4">4x</option>
        <option value="8">8x</option>
      </select>
    </div>
    <div class="chip">
      <span class="muted">Field</span>
      <select id="fieldSelect" class="settingsSelect toolbarSelect" title="Field image Selector">
        <option value="">No field image</option>
      </select>
    </div>
  </div>
</header>

<div id="helpModal" class="modal" hidden>
  <div class="modalBackdrop"></div>
  <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
    <div class="modalHeader">
      <div id="helpTitle" style="font-weight:900;font-size:16px">MotionView ‚Äî Help</div>
      <button id="btnHelpClose" class="iconBtn" title="Close">‚úï</button>
    </div>
    <div class="modalBody">
      MotionView is a PROS Live viewer that allows you to compare timings, adjust routes, and view your robot live, all in once place.
      <p>
        <a href="https://github.com/lewispinstein-hue/MotionView/tree/main">More Information</a>
      </p>
      <div style="margin-top:10px">
        <div style="font-weight:850;margin-bottom:6px">Main elements</div>
        <ul style="margin:0;padding-left:18px">
          <li><b>Field view</b>: robot path + pose, watches, hover/click to preview/lock.</li>
          <li><b>Timeline</b>: scrub through time; hover previews, click jumps.</li>
          <li><b>Sidebar</b>: watches list, poses list.</li>
          <li><b>Floating info window</b>: shows details of hovered point, including closest watch values.</li>
        </ul>
      </div>
      <div style="margin-top:10px" class="muted">
        Tip: Drag the thin handles to resize/collapse the sidebar (left) and timeline (bottom).
      </div>
      <div style="margin-top:14px;display:flex;gap:8px">
        <button id="btnHelpKeybinds" class="iconBtn secondaryBtn" style="font-size:15px">Keybinds</button>
      </div>
    </div>
  </div>
</div>

<div id="keybindsModal" class="modal" hidden>
  <div class="modalBackdrop"></div>
  <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="keybindsTitle">
    <div class="modalHeader">
      <div id="keybindsTitle" style="font-weight:900;font-size:20px">Keybinds</div>
      <button id="btnKeybindsClose" class="iconBtn" title="Close">‚úï</button>
    </div>
    <div class="modalBody">
      <div class="keybindSection">
        <div class="keybindHeader">Global</div>
        <div class="keybindAction" style="padding-bottom: 8px;">These keybinds work in any mode<br></div>
        <div class="keybindRow"><span class="keybindKeys">F</span><span class="keybindAction">Fit/reset field position</span></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + 1</span><span class="keybindAction">Switch to Viewing mode</span></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + 2</span><span class="keybindAction">Switch to Planning mode</span></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + Shift + K</span><span class="keybindAction">Clear everything (field + plan)</span></div>
      </div>
      <div class="keybindSection" style="padding-bottom: 8px;">
        <div class="keybindHeader"><br>Viewing</div>
        <div class="keybindAction">These keybinds work in Viewing mode<br></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + O</span><span class="keybindAction">Open JSON file</span></div>
        <div class="keybindRow"><span class="keybindKeys">S</span><span class="keybindAction">Start/stop live streaming (if connected)</span></div>
        <div class="keybindRow"><span class="keybindKeys">T / P</span><span class="keybindAction">Toggle Planned Overlay</span></div>
        <div class="keybindRow"><span class="keybindKeys">C</span><span class="keybindAction">Connect/disconnect</span></div>
        <div class="keybindRow"><span class="keybindKeys">Space</span><span class="keybindAction">Play/Pause playback (or toggle Auto‚Äëfollow Head when live‚Äëconnected)</span></div>
        <div class="keybindRow"><span class="keybindKeys">‚Üê / ‚Üí</span><span class="keybindAction">Step to previous/next pose</span></div>
      </div>
      <div class="keybindSection" style="padding-bottom: 8px;">
        <div class="keybindHeader"><br>Planning</div>
        <div class="keybindAction">These keybinds work in Planning mode<br></div>
        <div class="keybindRow"><span class="keybindKeys">Space</span><span class="keybindAction">Play/Pause plan playback</span></div>
        <div class="keybindRow"><span class="keybindKeys">Delete / Backspace</span><span class="keybindAction">Delete selected waypoint(s)</span></div>
        <div class="keybindRow"><span class="keybindKeys">‚Üê / ‚Üí / ‚Üë / ‚Üì</span><span class="keybindAction">Nudge selected waypoint(s)</span></div>
        <div class="keybindRow"><span class="keybindKeys">Shift + ‚Üê/‚Üí/‚Üë/‚Üì</span><span class="keybindAction">Nudge selected waypoint(s) by 5√ó step</span></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + Z</span><span class="keybindAction">Undo</span></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + Shift + Z</span><span class="keybindAction">Redo</span></div>
        <div class="keybindRow"><span class="keybindKeys">Cmd/Ctrl + K</span><span class="keybindAction">Clear planned path</span></div>
      </div>
    </div>
  </div>
</div>

<div id="settingsModal" class="modal" hidden>
  <div class="modalBackdrop"></div>
  <div class="modalCard settingsCard" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" tabindex="-1">
    <div class="modalHeader">
      <div class="modalHeaderContent">
        <div id="settingsTitle" class="settingsMainTitle">Settings</div>
        <div class="settingsSubtitle">Configure your MotionView experience</div>
      </div>
      <button id="btnSettingsClose" class="iconBtn closeBtn" title="Close">‚úï</button>
    </div>
    <div class="modalBody settingsBody">
      
      <!-- PROS Directory Section -->
      <div class="settingsSection settingsViewing settingsGroup" title="The path to your PROS Project. Used for Live Viewing only">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">üìÅ</div>
          <div class="settingsGroupTitle">PROS Directory</div>
        </div>
        <div class="settingsGroupBody">
          <label class="settingsDescription">Manual: enter a path. Auto: scan common folders for PROS projects.</label>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="prosDirInput" type="text" placeholder="/path/to/pros/project" class="settingsInput" style="flex:1" />
            <button id="btnProsDirAuto" class="iconBtn secondaryBtn" style="font-size:12px">Auto-detect</button>
          </div>
          <div id="prosDirAutoStatus" class="muted" style="margin-bottom: 0px !important;margin-top:6px;font-size:11px">No scan yet</div>
          <div id="prosDirAutoResults" style="margin-top:8px;font-size:12px" hidden></div>
          <div id="prosDirStatus" class="muted" style="margin-top:6px;font-size:11px">Set the PROS project directory for live viewing functionality</div>
        </div>
      </div>

      <div class="divider settingsViewing" style="margin:10px 0;"></div>

      <!-- PROS Exe Selection -->
      <div class="settingsSection settingsViewing settingsGroup" title="The path to your PROS CLI. Used for Live Viewing only">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">üíø</div>
          <div class="settingsGroupTitle">PROS Path</div>
        </div>
        <div class="settingsGroupBody">
          <label class="settingsDescription">Manual: enter a path. Auto: scan computer for the pros-cli.</label>
          <div style="display:flex;gap:8px;align-items:center">
            <input id="prosExeInput" type="text" placeholder="/path/to/pros-cli" class="settingsInput" style="flex:1" />
            <button id="btnProsExeAuto" class="iconBtn secondaryBtn" style="font-size:12px">Auto-detect</button>
          </div>
          <div id="prosExeAutoStatus" class="muted" style="margin-bottom: 0px !important;margin-top:6px;font-size:11px">No scan yet</div>
          <div id="prosExeAutoResults" style="margin-top:8px;font-size:12px" hidden></div>
          <div id="prosExeStatus" class="muted" style="margin-top:6px;font-size:11px">Set the pros-cli location for live viewing functionality</div>
        </div>
      </div>

      <div class="divider settingsViewing" style="margin:10px 0;"></div>

      <!-- Robot Image Section -->
      <div class="settingsSection settingsViewing settingsGroup" title="Upload an image of your own robot to be used instead of the defualt box">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">ü§ñ</div>
          <div class="settingsGroupTitle">Robot Image</div>
        </div>
        <div class="settingsGroupBody">
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
            <button id="btnUploadRobotImage" class="iconBtn secondaryBtn" style="font-size:12px">Upload Image</button>
            <label class="toggleRow" style="display:flex;align-items:center;gap:8px;cursor:pointer;margin:0">
              <input id="robotImageToggle" type="checkbox" style="width:18px;height:18px;cursor:pointer" />
              <span>Show robot image</span>
            </label>
          </div>
          <div id="settingsRobotImgControls" class="imageControls" style="margin-top:12px" hidden>
            <div class="grid2">
              <div>
                <label class="fieldLabel">Img Scale</label>
                <input id="settingsRobotImgScale" type="number" step="0.05" value="1" class="settingsInput" />
              </div>
              <div>
                <label class="fieldLabel">Img X Off</label>
                <input id="settingsRobotImgOffX" type="number" step="0.25" value="0" class="settingsInput" />
              </div>
              <div>
                <label class="fieldLabel">Img Y Off</label>
                <input id="settingsRobotImgOffY" type="number" step="0.25" value="0" class="settingsInput" />
              </div>
              <div>
                <label class="fieldLabel">Img Rot (¬∞)</label>
                <input id="settingsRobotImgRot" type="number" step="1" value="0" class="settingsInput" />
              </div>
              <div>
                <label class="fieldLabel">Img Opacity</label>
                <input id="settingsRobotImgAlpha" type="number" step="1" min="0" max="100" value="100" class="settingsInput" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="divider settingsViewing" style="margin:10px 0;"></div>

      <!-- Units & Robot Size Section -->
      <div class="settingsSection settingsViewing settingsGroup" title="Affects visuals and scaling only">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">üìê</div>
          <div class="settingsGroupTitle">Units & Robot Size</div>
        </div>
        <div class="settingsGroupBody">
          <div class="grid2">
            <div>
              <label class="fieldLabel">Units (interpret input poses as)</label>
              <select id="settingsUnitsSelect" class="settingsSelect">
                <option value="in">inches</option>
                <option value="cm">centimeters</option>
                <option value="ft">foot</option>
                <option value="tiles">tiles (24 in)</option>
              </select>
            </div>
            <div>
              <label class="fieldLabel">Field rotation</label>
              <select id="settingsFieldRotation" class="settingsSelect">
                <option value="0">0¬∞</option>
                <option value="90">90¬∞</option>
                <option value="180">180¬∞</option>
                <option value="270">270¬∞</option>
              </select>
            </div>
            <div>
              <label class="fieldLabel">Robot size (width / height)</label>
              <div class="grid2">
                <input id="settingsRobotW" type="number" step="1" value="12" class="settingsInput" />
                <input id="settingsRobotH" type="number" step="1" value="12" class="settingsInput" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="divider settingsViewing" style="margin:10px 0;"></div>

      <!-- Offsets Section -->
      <div class="settingsSection settingsViewing settingsGroup" title="Adjust the position of the displayed path.">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">‚ö°</div>
          <div class="settingsGroupTitle">Offsets</div>
        </div>
        <div class="settingsGroupBody">
          <div class="grid3">
            <div>
              <label class="fieldLabel">X Offset</label>
              <input id="settingsOffX" type="number" step="0.1" value="0" class="settingsInput" />
            </div>
            <div>
              <label class="fieldLabel">Y Offset</label>
              <input id="settingsOffY" type="number" step="0.1" value="0" class="settingsInput" />
            </div>
            <div>
              <label class="fieldLabel">Theta Offset</label>
              <input id="settingsOffTheta" type="number" step="1" value="0" class="settingsInput" />
            </div>
          </div>
        </div>
      </div>

      <div class="divider settingsViewing" style="margin:10px 0;"></div>

      <!-- Speed Normalization Section -->
      <div class="settingsSection settingsViewing settingsGroup" title="Manually enter the maximum and minimum speed that would be reported by your robot">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">üé®</div>
          <div class="settingsGroupTitle">Speed Normalization</div>
        </div>
        <div class="settingsGroupBody">
          <div class="grid2">
            <div>
              <label class="fieldLabel">Min speed (normalize)</label>
              <input id="settingsMinSpeed" type="number" title="Minimum speed used for color normalization (red=slow)" step="1" value="0" class="settingsInput" />
            </div>
            <div>
              <label class="fieldLabel">Max speed (normalize)</label>
              <input id="settingsMaxSpeed" type="number" title="Maximum speed used for color normalization (green=fast)" step="1" value="127" class="settingsInput" />
            </div>
          </div>
        </div>
      </div>

      <div class="divider settingsPlanning" style="margin:10px 0;"></div>

      <!-- Developer Section -->
      <div class="settingsSection settingsViewing settingsGroup" title="Advanced debug tools for troubleshooting livestreaming issues">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">üõ†Ô∏è</div>
          <div class="settingsGroupTitle">Developer</div>
        </div>
        <div class="settingsGroupBody">
          <div class="settingsRow" style="align-items:center !important;">
            <label class="settingsLabel">Livestreaming Debug</label>
            <input id="settingsLiveDebug" type="checkbox" style="width:18px;height:18px;cursor:pointer" title="Shows extra livestreaming logs in the Live window."/>
          </div>
        </div>
      </div>

      <div class="divider settingsPlanning" style="margin:10px 0;"></div>

      <!-- Planning Section -->
      <div class="settingsSection settingsPlanning settingsGroup">
        <div class="settingsGroupHeader">
          <div class="settingsGroupIcon">üß≠</div>
          <div class="settingsGroupTitle">Planning</div>
        </div>
        <div class="settingsGroupBody">
          <div class="grid2">
            <div>
              <label class="fieldLabel">Snap to grid (in)</label>
              <select id="settingsPlanSnapStep" class="settingsSelect">
                <option value="0">off</option>
                <option value="0.1">0.1</option>
                <option value="0.25">0.25</option>
                <option value="0.5" selected>0.5</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="5">5</option>
              </select>
            </div>
            <div>
              <label class="fieldLabel">Theta snap (deg)</label>
              <select id="settingsPlanThetaSnapStep" class="settingsSelect">
                <option value="0" selected>off</option>
                <option value="1">1</option>
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="30">30</option>
                <option value="45">45</option>
                <option value="90">90</option>
              </select>
            </div>
            <div>
              <label class="fieldLabel">Planning playback speed (1-127)</label>
              <input id="settingsPlanSpeed" type="number" step="1" min="0" max="127" value="50" class="settingsInput" />
            </div>
            <div>
              <label class="fieldLabel">Move selected waypoint (in)</label>
              <input id="settingsPlanMoveStep" type="number" step="0.1" value="0.5" class="settingsInput" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="floatingInfo" class="hidden">
  <div id="floatHeader">
    <div class="float-title">
      <span class="float-title-text">Point Details</span>
      <span class="float-subtitle" id="fcount">Point: ‚Äî/‚Äî</span>
    </div>
    <button id="btnCloseFloat" class="iconBtn" aria-label="Close">‚úï</button>
  </div>

  <div id="floatBody">
    <div class="float-section">
      <div class="float-row"><span class="k">X</span><span class="v" id="fx">‚Äî</span></div>
      <div class="float-row"><span class="k">Y</span><span class="v" id="fy">‚Äî</span></div>
      <div class="float-row"><span class="k">Œ∏</span><span class="v" id="ft">‚Äî</span></div>
    </div>

    <div class="divider"></div>

    <div class="float-section">
        <div class="float-row"><span class="k">Time</span><span class="v" id="ftime">‚Äî</span></div>
        <div class="float-row"><span class="k">Œî</span><span class="v" id="fdeltat">‚Äî</span></div>
    </div>

    <div class="divider"></div>

    <div class="float-section">
      <div class="float-row"><span class="k">Avg Vel</span><span class="v" id="favg">‚Äî</span></div>
      <div class="float-row"><span class="k">L Vel</span><span class="v" id="flv">‚Äî</span></div>
      <div class="float-row"><span class="k">R Vel</span><span class="v" id="frv">‚Äî</span></div>
    </div>
    <div class="divider"></div>

    <div class="float-watch" id="fwatchblock">
      <div class="float-watch-head">
        <span class="chip" id="fwatchclickable">Closest Watch</span>
        <span class="float-watch-time" id="fwatchtime">‚Äî</span>
      </div>

      <div class="float-row"><span class="k">Label</span><span class="v v-soft" id="fwatchlabel">‚Äî</span></div>
      <div class="float-row"><span class="k">Value</span><span class="v v-soft" id="fwatchvalue">‚Äî</span></div>
    </div>
  </div>

  <div id="floatResizer" aria-hidden="false"></div>
</div>


<div class="app">
  <div class="row">

    <div id="left">
      <div class="leftTopBar">
        <div class="leftTopRow">
          <button class="iconBtn pillAction" id="btnLeftStop" title="Stop">Stop</button>
          <button class="iconBtn pillAction" id="btnLeftConnect" title="Connect">Connect</button>

          <div></div>

          <div class="leftRefreshChip" title="Refresh + interval">
            <button class="leftRefreshBtn" id="btnLeftRefresh" type="button">Refresh</button>
            <select id="leftRefreshInterval" aria-label="Refresh interval">
              <option value="0">off</option>
              <option value="100">100ms</option>
              <option value="121">121ms (MVLib HZ)</option>
              <option value="250">250ms</option>
              <option value="500" selected>500ms</option>
              <option value="1000">1s</option>
              <option value="2000">2s</option>
              <option value="5000">5s</option>
            </select>
          </div>
        </div>
      </div>

      <div class="leftBody">
        <textarea id="liveWin" class="monoText" readonly wrap="soft" spellcheck="false" aria-label="Live window"></textarea>
      </div>
    </div>

    <div id="vSplitL" class="splitterV" title="Drag to resize"></div>

    <div id="canvasWrap">
      <canvas id="c"></canvas>
    </div>

    <div id="vSplit" class="splitterV" title="Drag to resize"></div>

    <div id="right">
      <div class="section planningOnly planSelSection">
        <div class="statsPanel">
          <div class="statsHeader">
            <div class="statsTitle">Waypoints</div>
            <div class="statsHint" id="planCount">0</div>
          </div>
          <div id="planList" class="planList"></div>
        </div>
      </div>
      <div id="planSplit" class="splitterH planningOnly" title="Drag to resize waypoint list"></div>
      <div class="section planningOnly">
        <div class="statsPanel">
          <div class="statsHeader">
            <div class="statsTitle">Selected Waypoint</div>
            <div class="statsHint" id="planSelIndex">‚Äî</div>
          </div>
          <div class="grid3" style="margin-top:10px">
            <div>
              <label>X</label>
              <input id="planSelX" type="text" inputmode="decimal" />
            </div>
            <div>
              <label>Y</label>
              <input id="planSelY" type="text" inputmode="decimal" />
            </div>
            <div>
              <label>Œ∏ (deg)</label>
              <input id="planSelTheta" type="text" inputmode="decimal" />
            </div>
          </div>
        </div>
      </div>
      <div class="section viewingOnly">
        <div class="rowline" style="gap:8px;flex-wrap:wrap">
          <button id="btnFile" class="iconBtn" accept=".txt,.log,.json" title="Open JSON">üìÑ</button>
          <button id="btnToggleFloat" class="iconBtn" title="Toggle Info Window">üìã</button>
          <button id="btnTogglePlanOverlay" class="iconBtn" title="Toggle Planning Path overlay">üß≠</button>
        </div>
      </div>
      <div class="section viewingOnly">
        <details open id="secWatches">
          <summary>
            <span>Watches</span>
            <span class="pill" id="watchCount">‚Äî</span>
          </summary>
          <div class="detailsBody">
            <div class="rowline" style="margin-bottom:8px">
              <span class="muted">Sort</span>
              <select id="watchSort" class="settingsSelect toolbarSelect" style="margin-left:auto">
                <option value="level">Level</option>
                <option value="time" selected>Time</option>
                <option value="-time">‚ÄìTime</option>
                <option value="value">Value</option>
              </select>
            </div>

            <div id="watchList"></div>
            <div class="muted" style="margin-top:10px">
              Click a watch to highlight it on the field and on the timeline.
            </div>
          </div>
        </details>
      </div>

      
      <div class="section viewingOnly">
        <details open id="secPoses">
          <summary>
            <span>Poses</span>
            <span class="pill" id="poseCount">‚Äî</span>
          </summary>
          <div class="detailsBody">
            <div class="muted" style="margin-bottom:8px">Click a pose to jump.</div>
            <div id="poseList" title="Click a pose to jump the robot to that recorded moment" style="max-height: 40vh; overflow:auto; border:1px solid var(--line); border-radius:10px;"></div>
          </div>
        </details>
      </div>

    </div>
  </div>

  <div id="hSplit" class="splitterH" title="Drag to resize timeline"></div>

  <!-- Bottom timeline bar -->
  <div id="timelineBar">
    <div id="timelineTop">
      <div id="timelineLeft">
        <span class="pill" id="timePill">Time: ‚Äî</span>
        <span class="pill" id="deltaPill">Œî: ‚Äî</span> 
        <span class="pill" id="pointPill">Point: ‚Äî/‚Äî</span>
      </div>
      <span class="pill poseReadout" id="posePill">
        <span class="kv"><span class="k">X: </span><span class="v" id="poseX">‚Äî</span></span>
        <span class="kv"><span class="k">Y: </span><span class="v" id="poseY">‚Äî</span></span>
        <span class="kv"><span class="k">Œ∏: </span><span class="v" id="poseTh">‚Äî</span></span>
        <span class="kv"><span class="k">Speed: </span><span class="v" id="poseSn">‚Äî</span></span>
      </span>
      <span class="pill cursorPill" id="cursorPill">Cursor: ‚Äî</span>
    </div>
    <canvas id="timelineCanvas"></canvas>
    <div id="timelineHint" class="muted">
      Hover: preview robot at time ‚Ä¢ Click: set time ‚Ä¢ Watch dots are clickable
    </div>
  </div>

  <div id="planningTimelineBar">
    <div id="planningTimelineTop">
      <div id="planningTimelineLeft">
        <span class="pill" id="planTimePill">Plan: ‚Äî</span>
        <span class="pill" id="planPointPill">Points: 0</span>
      </div>
      <span class="pill cursorPill" id="planCursorPill">Cursor: ‚Äî</span>
    </div>
    <canvas id="planningTimelineCanvas"></canvas>
    <div id="planningTimelineHint" class="muted">Click or drag to scrub along the planned path</div>
  </div>
</div>
<div id="watchPopup" hidden></div>
</body>
</html>
